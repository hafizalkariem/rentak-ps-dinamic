; supervisord configuration

[supervisord]
nodaemon=true ; Pastikan ini true agar Supervisor berjalan di foreground (penting untuk Docker)

; Konfigurasi untuk Nginx
[program:nginx]
command=/usr/sbin/nginx -g "daemon off;" ; Perintah untuk menjalankan Nginx di foreground
autostart=true ; Otomatis mulai saat Supervisor start
autorestart=true ; Otomatis restart jika Nginx mati
stopasgroup=true ; Hentikan semua proses anak jika Supervisor berhenti

; Konfigurasi untuk PHP-FPM
[program:php-fpm]
command=/usr/sbin/php-fpm82 -F ; Perintah untuk menjalankan PHP-FPM di foreground (sesuaikan versi php-fpm)
autostart=true
autorestart=true
stopasgroup=true

; Opsional: Konfigurasi untuk Laravel Queue Worker (jika Anda menggunakan queue)
; [program:laravel-queue]
; command=php /app/artisan queue:work --sleep=3 --tries=3 --daemon
; autostart=true
; autorestart=true
; user=www-data ; Pastikan user ini punya izin yang benar
; numprocs=1
; process_name=%(program_name)s_%(process_num)02d
; stopsignal=QUIT
; stdout_logfile=/dev/stdout
; stdout_logfile_maxbytes=0
; stderr_logfile=/dev/stderr
; stderr_logfile_maxbytes=0